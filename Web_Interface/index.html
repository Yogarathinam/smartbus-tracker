<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartBus — Real-Time Public Transport for Small Cities</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet"
  />
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="animated-bg"></div>
  <div class="particles" id="particles"></div>

  <!-- Login Modal -->
  <div id="loginModal" class="login-modal">
    <div class="login-container">
      <button class="login-close" onclick="closeLoginModal()">&times;</button>
      <div class="login-header">
        <h2 class="login-title">Welcome Back</h2>
        <p class="login-subtitle">Sign in to access personalized features</p>
      </div>
      <form id="loginForm" class="login-form">
        <div id="loginMessage"></div>
        <div class="form-group">
          <label class="form-label" for="mobileNumber">Mobile Number</label>
          <div style="position: relative;">
            
            <input
              type="tel"
              id="mobileNumber"
              class="form-input"
              placeholder="Enter your mobile number"
              maxlength="10"
              required
            />
          </div>
        </div>
        <button type="submit" class="login-btn" id="sendOtpBtn">Send OTP</button>
      </form>
      <div id="otpContainer" class="otp-container">
        <div class="form-group">
          <label class="form-label">Enter OTP</label>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
            We've sent a 4-digit code to <span id="otpMobileDisplay"></span>
          </p>
          <div class="otp-inputs">
            <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
            <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
            <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
            <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
          </div>
          <div class="timer" id="otpTimer"></div>
        </div>
        <button type="button" class="login-btn" id="verifyOtpBtn">Verify OTP</button>
        <div style="text-align: center; margin-top: 1rem;">
          <button type="button" class="resend-btn" id="resendOtpBtn" disabled>
            Resend OTP
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="header-content">
     <a href="#" class="logo">
  <div class="logo-icon">
    <i class="fa-solid fa-bus"></i>
  </div>
  SmartBus
</a>

      <nav>
        <a href="#home" class="nav-link active">Home</a>
        <a href="#search" class="nav-link">Find Routes</a>
        <a href="#track" class="nav-link">Live Tracking</a>
        <a href="#about" class="nav-link">About</a>
<button class="login-btn-header" id="headerLoginBtn" onclick="openLoginModal()">
  <i class="fa-solid fa-user"></i> Login
</button>
        <div class="user-profile" id="userProfile">
          <div class="user-avatar" id="userAvatar">U</div>
          <span id="userName">User</span>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section id="home" class="hero">
    <div class="hero-grid">
      <div class="hero-content">
        <div class="hero-badge">
          <div class="pulse-dot"></div>
          Real-time tracking available
        </div>
        <h1 class="hero-title">Real-Time Bus Tracking for Small Cities</h1>
        <p class="hero-subtitle">
          Reliable real-time bus tracking for tier-2 towns — reducing delays, overcrowding, and encouraging sustainable transport.
        </p>
        <div class="hero-search">
          <div class="voice-controls">
            <select id="language" class="search-btn" style="padding: 0.75rem 1rem;">
              <option value="en-GB" selected>English (UK)</option>
              <option value="hi-IN">Hindi</option>
              <option value="ta-IN">Tamil</option>
              <option value="te-IN">Telugu</option>
            </select>
<button onclick="startListening()" class="voice-btn" title="Start Voice Search">
  <i class="fa-solid fa-microphone"></i>
</button>
<button onclick="stopSpeaking()" class="voice-btn" title="Stop Speaking">
  <i class="fa-solid fa-stop"></i>
</button>

          </div>
          <input type="text" class="search-input" id="heroSearch" placeholder="Enter bus number or stop name..." autocomplete="off" />
          <button class="search-btn" onclick="performRouteSearch()">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
        <div id="voiceOutput" class="result-card" style="display: none; text-align: left; white-space: pre-line;"></div>
        <div id="searchResult"></div>
<div class="cta-buttons">
  <a href="#track" class="btn-primary">
    <i class="fa-solid fa-location-dot"></i> Open Live Map
  </a>
  <a href="#search" class="btn-secondary">
    <i class="fa-solid fa-magnifying-glass"></i> Find Routes
  </a>
</div>

        <div class="hero-features">
          <div class="feature-item">
            <div class="feature-icon">✓</div>
            Live bus locations & accurate arrival times
          </div>
          <div class="feature-item">
            <div class="feature-icon">✓</div>
            Designed for low-bandwidth small city networks
          </div>
          <div class="feature-item">
            <div class="feature-icon">✓</div>
            Accessible on mobile & web platforms
          </div>
        </div>
      </div>
      <div class="hero-visual">
        <div class="floating-card">
          <div class="live-indicator">
            <div class="pulse-dot"></div>
            Live tracking active
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number" id="totalRoutes">12</div>
              <div class="stat-label">Active Routes</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="liveBuses">8</div>
              <div class="stat-label">Buses Online</div>
            </div>
          </div>
          <div style="text-align: center; color: var(--text-secondary); font-size: 0.875rem;">
  <i class="fa-solid fa-map"></i> Interactive map with real-time updates
</div>

        </div>
      </div>
    </div>
  </section>

  <!-- Search Section -->
  <section id="search" class="search-section">
    <div class="section-header">
      <h2 class="section-title">Find the Fastest Route in Your City</h2>
      <p class="section-subtitle">
        AI-powered route suggestions with shortest travel times, designed for growing cities with limited digital infrastructure.
      </p>
    </div>
    <div class="advanced-search">
      <form class="search-form" onsubmit="event.preventDefault(); findRoutes();">
        <div class="input-group">
          <label class="input-label" for="fromStop">From</label>
          <input type="text" id="fromStop" class="form-input" placeholder="Enter starting point..." autocomplete="off" />
          <div id="fromSuggestions" class="suggestions-dropdown"></div>
        </div>
        <div class="input-group">
          <label class="input-label" for="toStop">To</label>
          <input type="text" id="toStop" class="form-input" placeholder="Enter destination..." autocomplete="off" />
          <div id="toSuggestions" class="suggestions-dropdown"></div>
        </div>
        <button type="submit" class="find-btn">
  <i class="fa-solid fa-bus"></i> Find Routes
</button>

      </form>
      <div id="fareInfo" class="fare-info" style="display: none;"></div>
      <div id="searchResults" class="results-container"></div>
    </div>
  </section>

  <!-- Map Section -->
  <section id="track" class="map-section">
    <div class="section-header">
      <h2 class="section-title">Track Buses Live Across Your City</h2>
      <p class="section-subtitle">
        Get real-time bus positions, arrival predictions, and reduce uncertainty in your daily commute.
      </p>
    </div>
    <div class="map-container">
      <div class="map-header">
        <div class="map-controls">
          <input type="text" id="mapSearch" class="map-input" placeholder="Search bus or stop..." autocomplete="off" />
          <button class="map-btn" onclick="searchOnMap()">Search</button>
          <div class="toggle-switch">
            <input type="checkbox" id="liteMode" /> Lite Mode
          </div>
        </div>
      </div>
      <div id="map"></div>
      <div id="routeInfo" class="route-info hidden"></div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="search-section">
    <div class="section-header">
      <h2 class="section-title">About the Solution — Real-Time Public Transport Tracking</h2>
      <p class="section-subtitle">
        Addressing unpredictable bus schedules in small and tier-2 cities with GPS-based tracking, low-bandwidth optimization, and commuter-first design.
      </p>
    </div>
    <div class="advanced-search">
      <h3>Our Mission</h3>
      <p style="margin-bottom: 1rem;">
        To reduce delays, improve commuter confidence, and promote sustainable transport in growing cities lacking advanced infrastructure.
      </p>
      <h3>Key Features</h3>
      <ul style="margin-left: 2rem; color: var(--text-secondary);">
        <li>GPS-enabled bus tracking with live updates</li>
        <li>Estimated arrival times at stops</li>
        <li>Low bandwidth mode for rural/tier-2 connectivity</li>
        <li>Route optimization for shortest travel time</li>
        <li>Multi-language commuter support</li>
      </ul>
    </div>
  </section>

  <!-- Feedback Modal -->
  <div id="feedbackModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeFeedbackModal()">&times;</span>
      <h2>Passenger Feedback</h2>
      <form id="feedbackForm" onsubmit="submitFeedback(event)">
        <label for="busNumber">Bus Number:</label>
        <input type="text" id="busNumber" name="busNumber" required placeholder="Enter bus number" />
        <label for="condition">Condition of Bus:</label>
        <select id="condition" name="condition" required>
          <option value="">Select</option>
          <option value="excellent">Excellent</option>
          <option value="good">Good</option>
          <option value="average">Average</option>
          <option value="poor">Poor</option>
        </select>
        <label for="comments">Comments:</label>
        <textarea id="comments" name="comments" rows="3" placeholder="Additional feedback (optional)"></textarea>
        <button type="submit">Submit Feedback</button>
      </form>
      <div id="feedbackSuccessMsg" class="success-msg" style="display:none; color: green; margin-top: 1rem;">
        Feedback submitted successfully!
      </div>
    </div>
  </div>

  <!-- Notification -->
  <div id="destinationNotification" class="notification hidden">
    <p>Your stop "<span id="upcomingStopName"></span>" is coming up in 2 minutes!</p>
    <button onclick="dismissNotification()">Dismiss</button>
  </div>

  <!-- Bus Pass Suggestions -->
<section id="busPassSuggestions" class="card-section">
  <h2>Recommended Bus Passes for You</h2>
  <div class="cards-container">
    <div class="bus-pass-card" onclick="openPassModal('monthly')">
      <h3>Monthly Pass</h3>
      <p>Fixed Fare: ₹400 per month, All Bus Fare: ₹1000 per month</p>
      <a href="javascript:void(0);" class="buy-link">Buy Now</a>
    </div>
    <div class="bus-pass-card" onclick="openPassModal('student')">
      <h3>Student Pass</h3>
      <p>Discounted fares for students</p>
      <a href="javascript:void(0);" class="buy-link">Apply</a>
    </div>
    <div class="bus-pass-card" onclick="openPassModal('senior')">
      <h3>Senior Citizen Pass</h3>
      <p>Special passes for age 60+</p>
      <a href="javascript:void(0);" class="buy-link">Get Yours</a>
    </div>
  </div>
</section>

  <!-- Chatbot -->
  <div id="chatbotContainer" class="chatbot-container" onclick="toggleChatbot()">
    <div class="chatbot-header" title="Chat with SmartBus">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
           width="24" height="24" style="vertical-align: middle; cursor:pointer;">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 10h.01M12 14h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8-1.754 0-3.39-.466-4.797-1.268L3 20l1.465-4.586A7.964 7.964 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
    </div>
    <div id="chatbotBody" class="chatbot-body hidden" style="position: relative; overflow: hidden;">
      <canvas id="chatBgCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; z-index: 0;"></canvas>
      <div style="position: relative; z-index: 1; height: 100%; display: flex; flex-direction: column;">
        <div id="chatMessages" class="chat-messages" style="flex: 1; overflow-y: auto;"></div>
        <input id="chatInput" class="chat-input" placeholder="Ask me about routes, stops or timings..." onkeydown="if(event.key==='Enter') sendChatMessage()" />
      </div>
    </div>
  </div>
  <div id="toast" class="toast">Feedback submitted successfully!</div>

  <!-- Leaflet + JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>
  
</body>
</html>
